<div id="calendarBox">
	<div class="row">
		<div class="col-md-12">
			<button ng-click="logout()" style="margin:5px" class="btn btn-primary pull-right">Sign Out</button>
		</div>
	</div>
	<p class="lead" style="padding-top:20px; text-align:center;">
		[[updateCount]] Updates
	</p>
	<p class="text-center"><a href="/addUpdate">Add Update +</a></p>
	<input class="form-control" ng-model="search", placeholder="search" style="border-radius:0">
	<div class="row">
		<div class="col-lg-12">
			<div class="table-responsive">
				<table class="table table-hover">
					<thead>
					  <tr>
					  	<th>Update Name</th>
					  	<th>Date</th>
					  	<th>Content</th>
					  	<th>Edit</th>
					  	<th>Delete</th>	
					  </tr>
					</thead>		
					<tbody>
						<tr ng-repeat="update in updates | filter:search | orderBy:'-date.full'" class="[[update._id]]">
							<th scope="row"><a ng-click="showModal([[update._id]])" data-toggle="modal" style="cursor:pointer">[[update.title]]</a></th>
							<td>[[update.date.string]]</td>
							<td>[[update.description]]</td>
							<td><a href="/editUpdate/[[update._id]]"><span class="glyphicon glyphicon-pencil"></span></a></td>
							<td><p class="glyphicon glyphicon-trash" style="color:red;cursor:pointer" ng-click="deleteUpdate([[update._id]])"></p></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<p class="lead" style="padding-top:20px; text-align:center;">
		[[eventCount]] Events
	</p>
	<p class="text-center"><a href="/addEvent">Add Event +</a></p>
	<input class="form-control" ng-model="search", placeholder="search" style="border-radius:0">
	<div class="row">
		<div class="col-lg-12">
			<div class="table-responsive">
				<div class="modal fade" id="[[event._id]]" ng-repeat="event in events">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button class="close" data-dismiss="modal">&times;</button>

								<h4 class="modal-title">[[event.name]]</h4>
								<h5>Date: [[event.date.string]], Time: [[event.eventTime.string]]</h5>
								<h5>Location: [[event.location]]</h5>
								<h5 ng-show="event.capacity">Capacity: [[event.capacity]]</h5>
								<h5 ng-show="event.price">Price: $[[event.price]]</h5> 
							</div><!-- end modal header-->

							<div class="modal-body">
							<p ng-repeat="paragraph in event.description" ng-bind-html="paragraph">[[paragraph]]</p> 
							<p ng-repeat="paragraph in event.schedule" ng-bind-html="paragraph">[[paragraph]]</p>

							</div><!-- end modal body-->

							<div class="modal-footer">
								<div ng-if="event.past" style="display:inline-block; color:red" class="pull-left">
									<p>This event has passed.</p>
								</div>
								<button ng-show="event.externalLink" class="btn btn-default" type="button">
									<a href="[[event.externalLink]]" target="_blank">
										More Details <span class="glyphicon glyphicon-new-window"></span>
									</a>
								</button> 
								<div ng-if="!event.past" style="display:inline-block">
									<a href="[[event.registration.url]]" target="_blank" ng-show="event.registration.url"><button class="btn btn-success" type="button">Register for this Event</button></a>
								</div>
								<button class="btn btn-primary" data-dismiss="modal" type="button">Close</button>
							</div><!-- end modal-footer -->
						</div><!-- end modal content -->
					</div><!-- end modal dialog --> 
				</div><!--end modal fade -->
				<table class="table table-hover">
					<thead>
					  <tr>
					  	<th>Event Name</th>
					  	<th>status</th>
					  	<th>Date</th>	
					  	<th>Location</th>
					  	<th>Registration Link</th>
					  	<th>Sponsors and Supporters</th>
					  	<th>Edit</th>
					  	<th>Delete</th>	
					  </tr>
					</thead>		
					<tbody>
						<tr ng-repeat="event in events | filter:search | orderBy:'-date.full'" class="[[event._id]]">
							<th scope="row"><a ng-click="showModal([[event._id]])" data-toggle="modal" style="cursor:pointer">[[event.name]]</a></th>
							<td><span ng-hide="event.past">Upcoming</span><span ng-show="event.past">Past</span></td>
							<td>[[event.date.string]]</td>
							<td>[[event.location]]</td>
							<td><span ng-show="event.registration.date.string">Register by [[event.registration.date.string]]<span></td>
							<td ng-bind-html="event.sponsors">[[event.sponsors.join(", ")]]</td>
							<td><a href="/editEvent/[[event._id]]"><span class="glyphicon glyphicon-pencil"></span></a></td>
							<td><p class="glyphicon glyphicon-trash" style="color:red;cursor:pointer" ng-click="deleteEvent([[event._id]])"></p></td>
						</tr>
					</tbody>
				</table>
			</div><!-- end div table-responsive -->
		</div><!-- end col-lg-12 -->
	</div><!-- end row --> 
</div>